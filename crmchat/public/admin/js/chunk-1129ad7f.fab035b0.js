(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1129ad7f"],{"08ea":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),a("Card",{staticClass:"ivu-mt listbox",attrs:{bordered:!1,"dis-hover":""}},[a("Form",{ref:"userFrom",attrs:{model:e.userFrom,"label-width":e.labelWidth,"label-position":e.labelPosition},nativeOn:{submit:function(e){e.preventDefault()}}},[a("Row",{attrs:{gutter:16}},[a("Col",{attrs:{span:"18"}},[a("Col",{attrs:{span:"24"}},[a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"用户搜索：","label-for":"nickname"}},[a("Input",{attrs:{placeholder:"请输入","element-id":"nickname",clearable:""},model:{value:e.userFrom.nickname,callback:function(t){e.$set(e.userFrom,"nickname",t)},expression:"userFrom.nickname"}},[a("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.field_key,callback:function(t){e.field_key=t},expression:"field_key"}},[a("Option",{attrs:{value:"all"}},[e._v("全部")]),a("Option",{attrs:{value:"id"}},[e._v("ID")]),a("Option",{attrs:{value:"phone"}},[e._v("手机号")]),a("Option",{attrs:{value:"nickname"}},[e._v("用户昵称")])],1)],1)],1)],1)],1)],1),e.collapse?[a("Col",{attrs:{span:"24"}},[a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"用户分组：","label-for":"group_id"}},[a("Select",{attrs:{placeholder:"请选择","element-id":"group_id",clearable:""},model:{value:e.group_id,callback:function(t){e.group_id=t},expression:"group_id"}},[a("Option",{attrs:{value:"all"}},[e._v("全部")]),e._l(e.groupList,(function(t,s){return a("Option",{key:s,attrs:{value:t.id}},[e._v(e._s(t.group_name))])}))],2)],1)],1),a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"用户标签：","label-for":"label_id"}},[a("Select",{attrs:{multiple:"",placeholder:"请选择","element-id":"label_id",clearable:""},on:{"on-change":e.changeLabel},model:{value:e.label_id,callback:function(t){e.label_id=t},expression:"label_id"}},e._l(e.selectLabel,(function(t,s){return a("OptionGroup",{key:s,attrs:{label:t.label}},e._l(t.options,(function(t,s){return a("Option",{key:s,attrs:{value:t.id}},[e._v(e._s(t.label))])})),1)})),1)],1)],1),a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"性别：","label-for":"sex"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:e.userFrom.sex,callback:function(t){e.$set(e.userFrom,"sex",t)},expression:"userFrom.sex"}},[a("Radio",{attrs:{label:""}},[a("span",[e._v("全部")])]),a("Radio",{attrs:{label:"1"}},[a("span",[e._v("男")])]),a("Radio",{attrs:{label:"2"}},[a("span",[e._v("女")])]),a("Radio",{attrs:{label:"0"}},[a("span",[e._v("保密")])])],1)],1)],1)],1),a("Col",{attrs:{span:"18"}},[a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"选择时间：","label-for":"user_time"}},[a("DatePicker",{staticClass:"mr20",staticStyle:{width:"300px"},attrs:{editable:!1,value:e.timeVal,format:"yyyy/MM/dd",type:"datetimerange",placement:"bottom-start",placeholder:"自定义时间",options:e.options},on:{"on-change":e.onchangeTime}})],1)],1),a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"用户来源：","label-for":"group_id"}},[a("Select",{attrs:{placeholder:"请选择","element-id":"user_type",clearable:""},model:{value:e.user_type,callback:function(t){e.user_type=t},expression:"user_type"}},[a("Option",{attrs:{value:"all"}},[e._v("全部")]),e._l(e.selectType,(function(t,s){return a("Option",{key:s,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],2)],1)],1)],1)]:e._e(),a("Col",{staticClass:"ivu-text-right userFrom",attrs:{span:"6"}},[a("FormItem",[a("Button",{staticClass:"mr15",attrs:{type:"primary",icon:"ios-search",label:"default"},on:{click:e.userSearchs}},[e._v("搜索")]),a("Button",{staticClass:"ResetSearch",on:{click:function(t){return e.reset("userFrom")}}},[e._v("重置")]),a("a",{staticClass:"ivu-ml-8 font14 ml10",on:{click:function(t){e.collapse=!e.collapse}}},[e.collapse?[e._v("\n              收起\n              "),a("Icon",{attrs:{type:"ios-arrow-up"}})]:[e._v("\n              展开\n              "),a("Icon",{attrs:{type:"ios-arrow-down"}})]],2)],1)],1)],2)],1),a("Divider",{attrs:{dashed:""}}),a("Row",{staticClass:"mt20",attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"24"}},[a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-user-group_set"],expression:"['admin-user-group_set']"}],staticClass:"mr20",on:{click:e.setGroup}},[e._v("批量设置分组")]),a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["admin-user-set_label"],expression:"['admin-user-set_label']"}],staticClass:"mr20",on:{click:e.setLabel}},[e._v("批量设置标签")])],1),e.selectionList.length?a("Col",{staticClass:"userAlert",attrs:{span:"24"}},[a("Alert",{attrs:{"show-icon":""}},[e._v(" 已选择"),a("i",{staticClass:"userI"},[e._v(" "+e._s(e.selectionList.length)+" ")]),e._v("项")])],1):e._e()],1),a("Table",{ref:"table",staticClass:"mt25",attrs:{columns:e.columns,data:e.userLists,"highlight-row":"",loading:e.loading,"no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},on:{"on-selection-change":e.onSelectTab,"on-sort-change":e.sortChanged},scopedSlots:e._u([{key:"avatars",fn:function(e){var t=e.row;e.index;return[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.avatar,expression:"row.avatar"}]})])]}},{key:"nickname",fn:function(t){var s=t.row;t.index;return[a("div",{staticClass:"acea-row"},[a("Icon",{directives:[{name:"show",rawName:"v-show",value:"男"===s.sex,expression:"row.sex==='男'"}],staticClass:"mr5",attrs:{type:"md-male",color:"#2db7f5",size:"15"}}),a("Icon",{directives:[{name:"show",rawName:"v-show",value:"女"===s.sex,expression:"row.sex==='女'"}],staticClass:"mr5",attrs:{type:"md-female",color:"#ed4014",size:"15"}}),a("div",{domProps:{textContent:e._s(s.nickname)}})],1)]}},{key:"group_id",fn:function(t){var s=t.row;t.index;return[a("div",[e._v("\n          "+e._s(e.groupListObj[s.group_id])+"\n        ")])]}},{key:"label",fn:function(t){var s=t.row;t.index;return e._l(s.label,(function(t){return a("div",[a("span",[e._v(e._s(t.label))])])}))}},{key:"action",fn:function(t){var s=t.row,i=t.index;return[a("a",{on:{click:function(t){return e.edit(s)}}},[e._v("编辑")]),a("Divider",{attrs:{type:"vertical"}}),[a("Dropdown",{on:{"on-click":function(t){return e.changeMenu(s,t,i)}}},[a("a",{attrs:{href:"javascript:void(0)"}},[e._v("\n              更多\n              "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"1"}},[e._v("设置标签")]),a("DropdownItem",{attrs:{name:"2"}},[e._v("设置分组")])],1)],1)]]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:e.total,current:e.userFrom.page,"show-elevator":"","show-total":"","page-size":e.userFrom.limit},on:{"on-change":e.pageChange}})],1)],1),a("edit-from",{ref:"edits",attrs:{FromData:e.FromData},on:{submitFail:e.submitFail}}),a("user-details",{ref:"userDetails"}),a("Modal",{staticClass:"modelBox",attrs:{scrollable:"",title:"发送消息",width:"1200",height:"800","footer-hide":""},model:{value:e.modal13,callback:function(t){e.modal13=t},expression:"modal13"}},[e.modal13?a("news-category",{attrs:{isShowSend:e.isShowSend,userIds:e.user_ids,scrollerHeight:e.scrollerHeight,contentTop:e.contentTop,contentWidth:e.contentWidth,maxCols:e.maxCols}}):e._e()],1),a("Modal",{attrs:{scrollable:"",title:"请选择用户标签",closable:!1,width:"320","footer-hide":!0},model:{value:e.labelShow,callback:function(t){e.labelShow=t},expression:"labelShow"}},[e.labelShow?a("userLabel",{attrs:{uid:e.labelActive.uid},on:{close:e.labelClose,onceGetList:e.userGroup}}):e._e()],1),a("Modal",{attrs:{scrollable:"",title:"请选择用户分组",closable:!1,width:"320","footer-hide":!0},model:{value:e.setUserGroupModel,callback:function(t){e.setUserGroupModel=t},expression:"setUserGroupModel"}},[e.setUserGroupModel?a("user-group",{attrs:{activeUserInfo:e.activeUserInfo,userGroup:e.getUserGroup},on:{handleSelectGroup:e.handleSelectGroup,close:function(t){e.setUserGroupModel=!1}}}):e._e()],1),a("Modal",{attrs:{scrollable:"",title:"批量设置用户标签",closable:!1,width:"320","footer-hide":!0},model:{value:e.labelGroupSelect.model,callback:function(t){e.$set(e.labelGroupSelect,"model",t)},expression:"labelGroupSelect.model"}},[e.labelGroupSelect.model?a("label-group",{attrs:{labelList:e.labelGroupSelect.list},on:{close:function(t){e.labelGroupSelect.model=!1},confrim:e.handleEditLabelGroup}}):e._e()],1),a("Modal",{attrs:{scrollable:"",title:"批量设置用户分组",closable:!1,width:"320","footer-hide":!0},model:{value:e.userGroupSelect.model,callback:function(t){e.$set(e.userGroupSelect,"model",t)},expression:"userGroupSelect.model"}},[e.userGroupSelect.model?a("user-group",{attrs:{userGroup:e.userGroupSelect.list},on:{handleSelectGroup:e.handleselectUsersGroup,close:function(t){e.userGroupSelect.model=!1}}}):e._e()],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"i-layout-page-header"},[a("div",{staticClass:"i-layout-page-header"},[a("span",{staticClass:"ivu-page-header-title"},[e._v("用户管理")])])])}],r=(a("ac67"),a("32ea"),a("1bc7"),a("6a61"),a("dc45")),n=(a("a450"),a("357a")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"label-wrapper"},[e._l(e.labelList,(function(t,s){return a("div",{key:s,staticClass:"label-box"},[a("div",{staticClass:"title"},[e._v(e._s(t.name))]),a("div",{staticClass:"list"},e._l(t.label,(function(t,s){return a("div",{key:s,staticClass:"label-item",class:1==t.disabled?"on":"",on:{click:function(a){return e.selectLabel(t)}}},[e._v(e._s(t.label))])})),0)])})),a("div",{staticClass:"footer"},[a("Button",{staticClass:"btns",attrs:{type:"primary"},on:{click:e.subBtn}},[e._v("确定")]),a("Button",{staticClass:"btns",attrs:{type:"primary",ghost:""},on:{click:e.cancel}},[e._v("取消")])],1)],2)},o=[],c=(a("e680"),a("c24f")),u={name:"userLabel",props:{uid:{type:String|Number,default:""}},data:function(){return{labelList:[],activeIds:[],unLaberids:[]}},watch:{uid:{handler:function(e,t){e!=t&&this.getList()},deep:!0}},mounted:function(){this.getList()},methods:{getList:function(){var e=this;Object(c["g"])(this.uid).then((function(t){t.data.map((function(t){t.label&&t.label.lenth&&t.label.map((function(t){t.disabled&&e.activeIds.push(t.id)}))})),e.labelList=t.data}))},selectLabel:function(e){if(e.disabled){var t=this.activeIds.indexOf(e.id);this.activeIds.splice(t,1),e.disabled=!1}else this.activeIds.push(e.id),e.disabled=!0},subBtn:function(){var e=this,t=[];this.labelList.map((function(e){e.label.map((function(e){0==e.disabled&&t.push(e.id)}))})),this.unLaberids=t,Object(c["x"])(this.uid,{label_id:this.activeIds,un_label_id:this.unLaberids,ids:[this.uid]}).then((function(t){e.$emit("onceGetList"),e.activeIds=[],e.unLaberids=[],e.$Message.success(t.msg),e.$emit("close")})).catch((function(t){e.$Message.error(t.msg)}))},cancel:function(){this.activeIds=[],this.unLaberids=[],this.$emit("close")}}},d=u,m=(a("e84f"),a("5d22")),h=Object(m["a"])(d,l,o,!1,null,"7791038f",null),p=h.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"label-wrapper"},[a("div",{staticClass:"label-box"},[a("div",{staticClass:"title"}),a("div",{staticClass:"list"},e._l(e.userGroup,(function(t,s){return a("div",{key:s,staticClass:"label-item",class:{on:e.selectGroup.id?e.selectGroup.id==t.id:e.activeUserInfo.group_id==t.id},on:{click:function(a){return e.selectLabel(t)}}},[e._v(e._s(t.group_name))])})),0)]),a("div",{staticClass:"footer"},[a("Button",{staticClass:"btns",attrs:{type:"primary"},on:{click:e.subBtn}},[e._v("确定")]),a("Button",{staticClass:"btns",attrs:{type:"primary",ghost:""},on:{click:e.cancel}},[e._v("取消")])],1)])},b=[],g=(a("42e3"),{name:"userLabel",props:{activeUserInfo:{type:Object,default:function(){return{}}},userGroup:{type:Array,default:function(){return[]}}},data:function(){return{selectGroup:{}}},watch:{},mounted:function(){},methods:{selectLabel:function(e){this.selectGroup=e},subBtn:function(){this.$emit("handleSelectGroup",this.selectGroup)},cancel:function(){this.$emit("close")}}}),v=g,_=(a("604d"),Object(m["a"])(v,f,b,!1,null,"44f5dae7",null)),w=_.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"label-wrapper"},[e._l(e.labelList,(function(t,s){return a("div",{key:s,staticClass:"label-box"},[a("div",{staticClass:"title"},[e._v(e._s(t.name))]),a("div",{staticClass:"list"},e._l(t.label,(function(t,s){return a("div",{key:s,staticClass:"label-item",class:{on:1==t.disabled},on:{click:function(a){return e.selectLabel(t)}}},[e._v(e._s(t.label))])})),0)])})),a("div",{staticClass:"footer"},[a("Button",{staticClass:"btns",attrs:{type:"primary"},on:{click:e.subBtn}},[e._v("确定")]),a("Button",{staticClass:"btns",attrs:{type:"primary",ghost:""},on:{click:e.cancel}},[e._v("取消")])],1)],2)},k=[],x={name:"userLabel",props:{labelList:{type:Array,default:function(){return[]}}},data:function(){return{activeIds:[],unLaberids:[]}},watch:{uid:{handler:function(e,t){e!=t&&this.getList()},deep:!0}},mounted:function(){},methods:{selectLabel:function(e){this.$set(e,"disabled",!e.disabled)},subBtn:function(){this.$emit("confrim",this.labelList)},cancel:function(){this.$emit("close")}}},C=x,L=(a("d713"),Object(m["a"])(C,y,k,!1,null,"7070eb12",null)),S=L.exports,F=a("7736"),D=a("6b6c");function O(e){return Object(D["a"])({url:"agent/spread",method:"PUT",data:e})}var G=a("31b4"),M=a("a8e0"),j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("Modal",{attrs:{scrollable:"","footer-hide":"",closable:"",title:"用户详情","mask-closable":!1,width:"900"},model:{value:e.modals,callback:function(t){e.modals=t},expression:"modals"}},[e.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):e._e(),a("div",{staticClass:"acea-row"},[a("div",{staticClass:"avatar mr15"},[a("img",{attrs:{src:e.psInfo.avatar}})]),a("div",{staticClass:"dashboard-workplace-header-tip"},[a("p",{staticClass:"dashboard-workplace-header-tip-title",domProps:{textContent:e._s(e.psInfo.nickname||"-")}}),a("div",{staticClass:"dashboard-workplace-header-tip-desc"},e._l(e.detailsData,(function(t,s){return a("span",{key:s,staticClass:"dashboard-workplace-header-tip-desc-sp"},[e._v(e._s(t.title+"："+t.value))])})),0)])]),a("Row",{staticClass:"mt25",attrs:{type:"flex",justify:"space-between"}},[a("Col",{staticClass:"user_menu",attrs:{span:"4"}},[a("Menu",{attrs:{theme:e.theme2,"active-name":e.activeName},on:{"on-select":e.changeType}},e._l(e.list,(function(t,s){return a("MenuItem",{key:s,attrs:{name:t.val}},[e._v("\n                        "+e._s(t.label)+"\n                    ")])})),1)],1),a("Col",{attrs:{span:"20"}},[a("Table",{ref:"table",attrs:{columns:e.columns,data:e.userLists,"max-height":"400",loading:e.loading,"no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},scopedSlots:e._u([{key:"number",fn:function(t){var s=t.row;return[a("div",{class:s.pm?"plusColor":"reduceColor"},[e._v(e._s(s.pm?"+"+s.number:"-"+s.number))])]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:e.total,current:e.userFrom.page,"show-elevator":"","show-total":"","page-size":e.userFrom.limit},on:{"on-change":e.pageChange}})],1)],1)],1)],1)],1)},$=[],I={name:"userDetails",data:function(){return{theme2:"light",list:[{val:"order",label:"消费记录"},{val:"integral",label:"积分明细"},{val:"sign",label:"签到记录"},{val:"coupon",label:"持有优惠券"},{val:"balance_change",label:"余额变动"},{val:"spread",label:"好友关系"}],modals:!1,spinShow:!1,detailsData:[],userId:0,loading:!1,userFrom:{type:"order",page:1,limit:20},total:0,columns:[],userLists:[],psInfo:{},activeName:"order"}},created:function(){},methods:{getDetails:function(e){var t=this;this.activeName="order",this.userId=e,this.spinShow=!0,Object(c["detailsApi"])(e).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:200===a.status?(s=a.data,t.detailsData=s.headerList,t.psInfo=s.ps_info,t.changeType("order"),t.spinShow=!1):(t.spinShow=!1,t.$Message.error(a.msg));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.spinShow=!1,t.$Message.error(e.msg)}))},pageChange:function(e){this.userFrom.page=e,this.changeType(this.userFrom.type)},changeType:function(e){var t=this;this.loading=!0,this.userFrom.type=e,this.activeName=e,""===this.userFrom.type&&(this.userFrom.type="order");var a={id:this.userId,datas:this.userFrom};Object(c["infoApi"])(a).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(200!==a.status){e.next=21;break}s=a.data,t.userLists=s.list,t.total=s.count,e.t0=t.userFrom.type,e.next="order"===e.t0?7:"integral"===e.t0?9:"sign"===e.t0?11:"coupon"===e.t0?13:"balance_change"===e.t0?15:17;break;case 7:return t.columns=[{title:"订单ID",key:"order_id",minWidth:160},{title:"收货人",key:"real_name",minWidth:100},{title:"商品数量",key:"total_num",minWidth:90},{title:"商品总价",key:"total_price",minWidth:110},{title:"实付金额",key:"pay_price",minWidth:120},{title:"交易完成时间",key:"pay_time",minWidth:120}],e.abrupt("break",18);case 9:return t.columns=[{title:"来源/用途",key:"title",minWidth:120},{title:"积分变化",key:"number",minWidth:120},{title:"变化前积分",key:"balance",minWidth:120},{title:"日期",key:"add_time",minWidth:120},{title:"备注",key:"mark",minWidth:120}],e.abrupt("break",18);case 11:return t.columns=[{title:"动作",key:"title",minWidth:120},{title:"获得积分",key:"number",minWidth:120},{title:"签到时间",key:"add_time",minWidth:120},{title:"备注",key:"mark",minWidth:120}],e.abrupt("break",18);case 13:return t.columns=[{title:"优惠券名称",key:"coupon_title",minWidth:120},{title:"面值",key:"coupon_price",minWidth:120},{title:"有效期(天)",key:"coupon_time",minWidth:120},{title:"兑换时间",key:"_add_time",minWidth:120}],e.abrupt("break",18);case 15:return t.columns=[{title:"动作",key:"title",minWidth:120},{title:"余额变动",slot:"number",minWidth:120},{title:"当前余额",key:"balance",minWidth:120},{title:"创建时间",key:"add_time",minWidth:120},{title:"备注",key:"mark",minWidth:120}],e.abrupt("break",18);case 17:t.columns=[{title:"ID",key:"uid",minWidth:120},{title:"昵称",key:"nickname",minWidth:120},{title:"等级",key:"type",minWidth:120},{title:"加入时间",key:"add_time",minWidth:120}];case 18:t.loading=!1,e.next=23;break;case 21:t.loading=!1,t.$Message.error(a.msg);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))}}},W=I,T=(a("95a4"),a("ac72"),Object(m["a"])(W,j,$,!1,null,"0b05c524",null)),R=T.exports,P=a("c42b"),U=a("2e8e"),V=a("8c03");function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N={name:"user_list",components:{editFrom:G["a"],sendFrom:M["a"],userDetails:R,newsCategory:P["a"],customerInfo:V["default"],userLabel:p,userGroup:w,labelGroup:S},data:function(){return{setUserGroupModel:!1,getUserGroup:[],activeUserInfo:{},labelGroupSelect:{model:!1,list:[]},userGroupSelect:{model:!1,list:[]},labelShow:!1,customerShow:!1,promoterShow:!1,labelActive:{uid:0},formInline:{uid:0,spread_uid:0,image:""},options:{shortcuts:[{text:"今天",value:function(){var e=new Date,t=new Date;return t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),[t,e]}},{text:"昨天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),[t,e]}},{text:"最近7天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-6))),[t,e]}},{text:"最近30天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-29))),[t,e]}},{text:"本月",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),1))),[t,e]}},{text:"本年",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),0,1))),[t,e]}}]},collapse:!1,headeNum:[{type:"",name:"全部"},{type:"wechat",name:"微信公众号"},{type:"routine",name:"微信小程序"},{type:"h5",name:"H5"},{type:"pc",name:"PC"}],address:[],addresData:U["a"],isShowSend:!0,modal13:!1,maxCols:4,scrollerHeight:"600",contentTop:"130",contentWidth:"98%",grid:{xl:8,lg:8,md:12,sm:24,xs:24},grid2:{xl:18,lg:16,md:12,sm:24,xs:24},loading:!1,total:0,userFrom:{label_id:[],user_type:"",status:"",sex:"",time:"",nickname:"",page:1,limit:15,group_id:"",field_key:""},field_key:"",level:"",group_id:"",label_id:[],user_time_type:"",pay_count:"",columns:[{type:"selection",width:60,align:"center"},{title:"ID",key:"id",width:80},{title:"头像",slot:"avatars",minWidth:60},{title:"昵称",slot:"nickname",minWidth:150},{title:"备注昵称",key:"remark_nickname",minWidth:150},{title:"分组",slot:"group_id",minWidth:100},{title:"手机号",key:"phone",minWidth:100},{title:"用户来源",key:"type",minWidth:100},{title:"用户标签",slot:"label",minWidth:100},{title:"操作",slot:"action",fixed:"right",minWidth:120}],userLists:[],FromData:null,selectionList:[],user_ids:"",selectedData:[],timeVal:[],array_ids:[],groupList:[],groupListObj:{},levelList:[],labelFrom:{page:1,limit:""},labelLists:[],selectLabel:[],selectType:[{label:"PC",value:0},{label:"微信",value:1},{label:"小程序",value:2},{label:"H5",value:3},{label:"APP",value:4}],user_type:"all"}},computed:E(E({},Object(F["e"])("media",["isMobile"])),{},{labelWidth:function(){return this.isMobile?void 0:100},labelPosition:function(){return this.isMobile?"top":"right"}}),created:function(){this.getList()},mounted:function(){this.userGroup(),this.groupLists(),this.getUserLabelAll()},methods:{getUserLabelAll:function(){var e=this;Object(c["h"])().then((function(t){e.selectLabel=t.data}))},onceGetList:function(){this.getList()},labelClose:function(){this.labelShow=!1},putSend:function(e){var t=this;this.$refs[e].validate((function(a){if(a){if(!t.formInline.spread_uid)return t.$Message.error("请上传用户");O(t.formInline).then((function(a){t.promoterShow=!1,t.$Message.success(a.msg),t.getList(),t.$refs[e].resetFields()})).catch((function(e){t.$Message.error(e.msg)}))}}))},synchro:function(){var e=this;Object(c["R"])().then((function(t){e.$Message.success(t.msg)})).catch((function(t){e.$Message.error(t.msg)}))},groupLists:function(){var e=this;this.loading=!0,Object(c["H"])(this.labelFrom).then(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=a.data,e.labelLists=s.list;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},onClickTab:function(e){this.userFrom.page=1,this.userFrom.user_type=e,this.getList()},userGroup:function(){var e=this,t={page:1,limit:""};Object(c["E"])(t).then((function(t){e.groupList=t.data.list,e.groupList.forEach((function(t){e.$set(e.groupListObj,t.id,t.group_name)}))}))},setGroup:function(){var e=this;if(0===this.selectionList.length)this.$Message.warning("请选择要设置分组的用户");else{var t={uids:this.array_ids};Object(c["P"])(t).then((function(t){200==t.status&&(e.userGroupSelect.model=!0,e.userGroupSelect.list=t.data)}))}},handleselectUsersGroup:function(e){var t=this;Object(c["D"])({ids:this.selectionList.map((function(e){return e.id})),group_id:e.id}).then((function(e){200==e.status&&(t.userGroupSelect.model=!1,t.getList(),t.$Message.success(e.msg))})).catch((function(e){t.$Message.error(e.msg)}))},setLabel:function(){var e=this;if(0===this.selectionList.length)this.$Message.warning("请选择要设置标签的用户");else{var t={uids:this.array_ids};Object(c["Q"])(t).then((function(t){200==t.status&&(e.labelGroupSelect.list=t.data,e.labelGroupSelect.model=!0)}))}},handleEditLabelGroup:function(e){var t=this,a=this.selectionList.map((function(e){return e.id})),s=[],i=[],r={};e.forEach((function(e){e.label&&e.label.length&&e.label.forEach((function(e){e.disabled?s.push(e.id):i.push(e.id)}))})),r={ids:a,label_id:s,un_label_id:i},Object(c["x"])("",r).then((function(e){200==e.status&&(t.getList(),t.$Message.success(e.msg),t.labelGroupSelect.model=!1)})).catch((function(e){t.$Message.error(e.msg)}))},onchangeTime:function(e){this.timeVal=e,this.userFrom.time=this.timeVal.join("-")},changeMenu:function(e,t,a){var s=this,i=[];i.push(e.id);switch(this.activeUserInfo=e,t){case"1":this.openLabel(e);break;case"2":Object(c["P"])().then((function(e){200==e.status&&(s.getUserGroup=e.data,s.setUserGroupModel=!0)}));break}},handleSelectGroup:function(e){var t=this;Object(c["D"])({ids:[this.activeUserInfo.id],group_id:e.id}).then((function(e){200==e.status&&(t.setUserGroupModel=!1,t.getList(),t.$Message.success("设置成功"))})).catch((function(e){t.$Message.error(e.msg)}))},openLabel:function(e){this.labelShow=!0,this.labelActive.uid=e.id},editS:function(e){this.promoterShow=!0,this.formInline.id=e.id},customer:function(){this.customerShow=!0},imageObject:function(e){this.customerShow=!1,this.formInline.spread_uid=e.uid,this.formInline.image=e.image},cancel:function(e){this.promoterShow=!1,this.$refs[e].resetFields()},del:function(e,t,a,s){var i=this,r={title:t,num:a,url:"user"===s?"user/del_level/".concat(e.uid):"agent/stair/delete_spread/".concat(e.uid),method:"user"===s?"DELETE":"PUT",ids:""};this.$modalSure(r).then((function(e){i.$Message.success(e.msg),i.getList()})).catch((function(e){i.$Message.error(e.msg)}))},submitModel:function(){this.getList()},getList:function(){var e=this;"all"===this.user_type?this.userFrom.user_type="":this.userFrom.user_type=this.user_type,this.userFrom.status=this.userFrom.status||"",this.userFrom.sex=this.userFrom.sex||"",this.userFrom.label_id="all"===this.label_id?"":this.label_id.join(","),this.userFrom.field_key="all"===this.field_key?"":this.field_key,this.userFrom.group_id="all"===this.group_id?"":this.group_id,this.loading=!0,Object(c["K"])(this.userFrom).then(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=a.data,e.userLists=s.list,console.log(e.userLists),e.total=s.count,e.loading=!1;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},pageChange:function(e){this.selectionList=[],this.userFrom.page=e,this.getList()},userSearchs:function(){this.userFrom.page=1,this.getList()},reset:function(e){this.userFrom={user_type:"",status:"",sex:"",time:"",nickname:"",field_key:"",group_id:"",label_id:"",page:1,limit:20},this.field_key="",this.group_id="",this.label_id="",this.timeVal=[],this.getList()},getUserFrom:function(e){var t=this;Object(c["f"])(e).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!1!==a.data.status){e.next=2;break}return e.abrupt("return",t.$authLapse(a.data));case 2:t.FromData=a.data,t.$refs.edits.modals=!0;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},onchangeIsShow:function(e){var t=this,a={id:e.id,status:e.status};Object(c["l"])(a).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$Message.success(a.msg);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},onSelectTab:function(e){this.selectionList=e;var t=[];this.selectionList.map((function(e){t.push(e.id)})),this.array_ids=t,this.user_ids=t.join(",")},edit:function(e){this.getUserFrom(e.id)},submitFail:function(){},sortChanged:function(e){this.userFrom[e.key]=e.order,this.getList()}}},A=N,z=(a("45dd"),Object(m["a"])(A,s,i,!1,null,"1ddfed84",null));t["default"]=z.exports},"21a4":function(e,t,a){"use strict";a("f66f")},"3e07":function(e,t,a){},"45dd":function(e,t,a){"use strict";a("b89b")},"604d":function(e,t,a){"use strict";a("89fe")},7558:function(e,t,a){},"89fe":function(e,t,a){},"8c03":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customer"},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,"label-width":100},nativeOn:{submit:function(e){e.preventDefault()}}},[a("Row",{attrs:{gutter:24,type:"flex"}},[a("Col",{staticClass:"ivu-text-left",attrs:{span:"24"}},[a("FormItem",{attrs:{label:"搜索日期："}},[a("RadioGroup",{staticClass:"mr",attrs:{type:"button"},on:{"on-change":function(t){return e.selectChange(e.formValidate.data)}},model:{value:e.formValidate.data,callback:function(t){e.$set(e.formValidate,"data",t)},expression:"formValidate.data"}},e._l(e.fromList.fromTxt,(function(t,s){return a("Radio",{key:s,attrs:{label:t.val}},[e._v(e._s(t.text))])})),1),a("DatePicker",{staticStyle:{width:"200px"},attrs:{editable:!1,value:e.timeVal,format:"yyyy/MM/dd",type:"daterange",placement:"bottom-end",placeholder:"自定义时间"},on:{"on-change":e.onchangeTime}})],1)],1),a("Col",{staticClass:"ivu-text-left",attrs:{span:"12"}},[a("FormItem",{attrs:{label:"用户名称："}},[a("Input",{staticStyle:{width:"90%"},attrs:{search:"","enter-button":"",placeholder:"请输入用户名称"},on:{"on-search":e.userSearchs},model:{value:e.formValidate.nickname,callback:function(t){e.$set(e.formValidate,"nickname",t)},expression:"formValidate.nickname"}})],1)],1)],1)],1),a("Table",{ref:"selection",attrs:{loading:e.loading2,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果",columns:e.columns4,data:e.tableList2},scopedSlots:e._u([{key:"headimgurl",fn:function(e){var t=e.row;e.index;return[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.headimgurl,expression:"row.headimgurl"}]})])]}},{key:"user_type",fn:function(t){var s=t.row;t.index;return["wechat"===s.user_type?a("span",[e._v("公众号")]):e._e(),"routine"===s.user_type?a("span",[e._v("小程序")]):e._e(),"h5"===s.user_type?a("span",[e._v("H5")]):e._e(),"pc"===s.user_type?a("span",[e._v("PC")]):e._e()]}},{key:"sex",fn:function(t){var s=t.row;t.index;return[a("span",{directives:[{name:"show",rawName:"v-show",value:1===s.sex,expression:"row.sex ===1"}]},[e._v("男")]),a("span",{directives:[{name:"show",rawName:"v-show",value:2===s.sex,expression:"row.sex ===2"}]},[e._v("女")]),a("span",{directives:[{name:"show",rawName:"v-show",value:0===s.sex,expression:"row.sex ===0"}]},[e._v("保密")])]}},{key:"country",fn:function(t){var s=t.row;t.index;return[a("span",[e._v(e._s(s.country+s.province+s.city))])]}},{key:"subscribe",fn:function(t){var s=t.row;t.index;return[a("span",{domProps:{textContent:e._s(1===s.subscribe?"关注":"未关注")}})]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:e.total2,"show-elevator":"","show-total":"","page-size":e.formValidate.limit},on:{"on-change":e.pageChange2}})],1)],1)},i=[],r=(a("6a61"),a("dc45")),n=a("90e7"),l={name:"index",data:function(){var e=this;return{formValidate:{page:1,limit:15,data:"",nickname:""},tableList2:[],timeVal:[],fromList:{title:"选择时间",custom:!0,fromTxt:[{text:"全部",val:""},{text:"今天",val:"today"},{text:"昨天",val:"yesterday"},{text:"最近7天",val:"lately7"},{text:"最近30天",val:"lately30"},{text:"本月",val:"month"},{text:"本年",val:"year"}]},currentid:0,productRow:{},columns4:[{title:"选择",key:"chose",width:60,align:"center",render:function(t,a){var s=a.row.uid,i=!1;i=e.currentid===s;var r=e;return t("div",[t("Radio",{props:{value:i},on:{"on-change":function(){if(r.currentid=s,e.productRow=a.row,e.productRow.uid)if("image"===e.$route.query.fodder){var t={image:e.productRow.headimgurl,uid:e.productRow.uid};form_create_helper.set("image",t),form_create_helper.close("image")}else e.$emit("imageObject",{image:e.productRow.headimgurl,uid:e.productRow.uid});else e.$Message.warning("请先选择商品")}}})])}},{title:"ID",key:"uid",width:80},{title:"微信用户名称",key:"nickname",minWidth:180},{title:"客服头像",slot:"headimgurl",minWidth:60},{title:"用户类型",slot:"user_type",minWidth:100},{title:"性别",slot:"sex",minWidth:60},{title:"地区",slot:"country",minWidth:120},{title:"是否关注公众号",slot:"subscribe",minWidth:120}],loading2:!1,total2:0}},created:function(){},mounted:function(){this.getListService()},methods:{onchangeTime:function(e){this.timeVal=e,this.formValidate.data=this.timeVal.join("-"),this.getListService()},selectChange:function(e){this.formValidate.data=e,this.timeVal=[],this.getListService()},getListService:function(){var e=this;this.loading2=!0,Object(n["r"])(this.formValidate).then(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=a.data,e.tableList2=s.list,e.total2=s.count,e.tableList2.map((function(e){e._isChecked=!1})),e.loading2=!1;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading2=!1,e.$Message.error(t.msg)}))},pageChange2:function(e){this.formValidate.page=e,this.getListService()},userSearchs:function(){this.formValidate.page=1,this.getListService()}}},o=l,c=(a("21a4"),a("5d22")),u=Object(c["a"])(o,s,i,!1,null,"07e04ed2",null);t["default"]=u.exports},"95a4":function(e,t,a){"use strict";a("fdb0")},ac72:function(e,t,a){"use strict";a("7558")},b89b:function(e,t,a){},d713:function(e,t,a){"use strict";a("3e07")},e84f:function(e,t,a){"use strict";a("fa57")},f66f:function(e,t,a){},fa57:function(e,t,a){},fdb0:function(e,t,a){}}]);
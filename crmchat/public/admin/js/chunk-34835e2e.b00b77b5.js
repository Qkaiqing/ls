(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34835e2e"],{4344:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pc_customerServer_container"},[s("div",{staticClass:"pc_customerServer_container_header"},[s("div",{staticClass:"pc_customerServer_container_header_title"},[s("img",{attrs:{src:e.chatServerData.to_user_avatar,alt:""}}),s("span",[e._v(e._s(e.chatServerData.to_user_nickname))])]),"1"!=e.upperData.noCanClose?s("div",{staticClass:"pc_customerServer_container_header_handle",on:{click:e.closeIframe}},[s("span",{staticClass:"iconfont"},[e._v("")])]):e._e()]),s("div",{staticClass:"pc_customerServer_container_content"},[e.isShowProductModel?s("div",{staticClass:"productMessage_container"},[s("div",{staticClass:"productMessage_container_image"},[s("img",{attrs:{src:e.productMessage.image,alt:""}})]),s("div",{staticClass:"productMessage_container_content"},[s("div",{staticClass:"productMessage_container_content_title"},[e._v(e._s(e.productMessage.store_name))]),s("div",{staticClass:"productMessage_container_content_priceOrHandle"},[s("div",[e._v("￥"+e._s(e.productMessage.price))]),s("div",{on:{click:e.sendProduct}},[e._v("发送客服")])])])]):e._e(),s("happy-scroll",{attrs:{size:"1",resize:"","hide-horizontal":"","scroll-top":e.scrollTop},on:{"vertical-start":e.scrollHandler}},[s("div",{staticClass:"scroll_content",class:{pt140:e.isShowProductModel},attrs:{id:"chat_scroll"}},[s("Spin",{directives:[{name:"show",rawName:"v-show",value:e.isLoad,expression:"isLoad"}]},[s("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),s("div",[e._v("Loading")])],1),s("div",{staticClass:"chart_list"},e._l(e.records,(function(t,a){return s("div",{key:a,staticClass:"chart_list_item"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"item.show"}],staticClass:"chart_list_item_time"},[e._v(e._s(t.time))]),s("div",{staticClass:"chart_list_item_content",class:{"right-box":t.user_id==e.chatServerData.user_id}},[s("div",{staticClass:"chart_list_item_avatar"},[s("img",{attrs:{src:t.avatar,alt:""}})]),t.msn_type<=2?s("div",{staticClass:"chart_list_item_text"},[s("span",{domProps:{innerHTML:e._s(e.replace_em(t.msn))}})]):e._e(),3==t.msn_type?s("div",{staticClass:"chart_list_item_img"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.msn,expression:"item.msn"}],on:{load:e.imageLoad}})]):e._e(),5==t.msn_type?s("div",{staticClass:"chart_list_item_imgOrText"},[s("div",{staticClass:"order-wrapper"},[s("div",{staticClass:"img-box"},[s("img",{attrs:{src:t.other.image,alt:""}})]),s("div",{staticClass:"order-info"},[s("div",{staticClass:"price-box"},[s("div",{staticClass:"num"},[e._v("¥ "+e._s(t.other.price))])]),s("div",{staticClass:"name"},[e._v(e._s(t.other.store_name))])])])]):e._e()])])})),0)],1)])],1),s("div",{staticClass:"footer_customerServer_container"},[s("div",{staticClass:"mobel_customerServer_container_footer"},[s("div",{staticClass:"crmchat_link",on:{click:e.tolink}},[s("span",[e._v("CRMChat开源客服系统")])]),s("div",{staticClass:"mobel_customerServer_container_footer_uploag_image"},[s("span",{staticClass:"iconfont"},[e._v("")]),s("input",{staticClass:"file_input",attrs:{type:"file"},on:{change:e.uploadFile}})]),s("div",{staticClass:"mobel_customerServer_container_footer_input"},[s("div",{staticClass:"mobel_customerServer_container_footer_input_con"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.userMessage,expression:"userMessage"}],staticClass:"font",attrs:{placeholder:"请输入内容"},domProps:{value:e.userMessage},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendText(t)},focus:e.textareaInput,input:[function(t){t.target.composing||(e.userMessage=t.target.value)},function(t){return e.textareaChange(t)}]}}),s("p",{staticClass:"font",domProps:{innerHTML:e._s(e.pCont)}})])]),s("div",{staticClass:"mobel_customerServer_container_footer_emoji",on:{click:e.selectEmoji}},[s("span",{staticClass:"iconfont "},[e._v("")])]),s("div",{staticClass:"sendMessage",class:{"sendMessage-primary":e.userMessage}},[s("div",{on:{click:e.sendText}},[e._v("发送")])])]),s("div",{staticClass:"mobel_customerServer_container_footer_emojiList",class:{canSelectemoji:2==e.inputConType}},e._l(e.emojiList,(function(t,a){return 2==e.inputConType?s("div",{key:a,staticClass:"emoji-item"},[s("i",{staticClass:"em",class:t,on:{click:function(s){return s.stopPropagation(),e.select(t)}}})]):e._e()})),0)])])},i=[],r=(s("a481"),s("6db4")),o=s("7624"),c=s("c58a"),n={components:{HappyScroll:r["HappyScroll"]},mixins:[c["a"]],data:function(){return{isLoad:!1,scrollTop:0,emojiList:o["a"],pCont:"",deviceType:"mobile"}},created:function(){},computed:{records:function(){var e=this;return this.chatServerData.serviceList.map((function(t,s){return t.time=e.$moment(1e3*t.add_time).format("MMMDo H:mm"),s?t.add_time-e.chatServerData.serviceList[s-1].add_time>=300?t.show=!0:t.show=!1:t.show=!0,t}))}},methods:{textareaChange:function(e){var t=e.target.value.replace(/\n\s(\s)*/gi,"\n");t=t.replace(/^\s*/gi,"");var s=t.replace(/</gi,"&lt;");s=t.replace(/\n(\n)*/gi,"<br>"),s=s.replace(/\s+/gi,"&nbsp;"),t=s.replace(/&nbsp;/gi," "),t=t.replace(/<br>/gi,"\n"),t=t.replace(/&lt;/gi,"<"),this.userMessage=t,this.pCont=s+"."},getScrollTop:function(){console.log(123)},getScrollEnd:function(){console.log(321)},replace_em:function(e){return e=e.replace(/\[em-([a-z_]*)\]/g,"<span class='em em-$1'/></span>"),e}}},l=n,_=(s("499a"),s("2877")),d=Object(_["a"])(l,a,i,!1,null,"b3043486",null);t["default"]=d.exports},"499a":function(e,t,s){"use strict";var a=s("d753"),i=s.n(a);i.a},d753:function(e,t,s){}}]);